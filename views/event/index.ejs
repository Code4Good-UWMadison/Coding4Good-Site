<!doctype html>
<html>

<head>
    <% include ../template/head.ejs %>
    <link rel="stylesheet" type="text/css" href="/css/slideshow.css"/>
</head>

<body>
    <% include ../template/nav.ejs %>
    <div class="container body-layout">
        <div class="row center">
            <h2>Events</h2>
        </div>

        <% if (eventsSet.length == 0){  %>
            <p class="error-msg">Sorry! Currently, there are no events available</p>
        <% } else { %>
            <!-- Slideshow container -->
            <div class="slideshow-container">

                <% if (auth([all_user_role.Developer,
                    all_user_role.ProjectManager,
                    all_user_role.Admin,
                    all_user_role.EventExecutive,
                    all_user_role.ProjectLeader], user_role)) { %>
                    <div class="col-sm-8-offset" align="right">
                        <a class="btn primary-button" href="/event/create">Create Event</a>
                    </div>
                <% } %>

                <% var counter = 0; %>
                <% eventsSet.forEach(function(row) { %>
                    <% counter += 1; %>
                    <!-- Full-width images with number and caption text -->
                    <div class="mySlides">
                        <div class="numbertext"> <%= counter %> / <%= eventsSet.length %> </div>
                        <% let link = url_with_https(row.link) %>
                        <a href="<%= link %>">
                            <img class="slide-img" src="<%= row.image %>" alt="<%= row.description %>" onerror="this.src='/img/brand.png'">
                        </a>
                        <div class="text">
                            <strong><%= row.title %>&nbsp;</strong>
                            <em><%= row.description %>&nbsp;</em>
                            <span>Location: <%= row.location %>&nbsp;</span>
                            <span>Event Time: <%= row.event_time.toDateString() %>&nbsp;</span>
                        </div>
                    </div>
                <% }); %>
                <!-- Next and previous buttons -->
                <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                <a class="next" onclick="plusSlides(1)">&#10095;</a>
                <div style="text-align:center">
                <% for (var i = 1; i <= counter; i++) { %>
                    <!-- The dots/circles -->
                    <span class="dot" onclick="currentSlide(<%= i %>)"></span>
                <% } %>
                </div>
            </div>
        <% } %>

        <script src="/js/slideshow.js"></script>
</body>

</html>